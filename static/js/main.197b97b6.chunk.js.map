{"version":3,"sources":["components/Header.tsx","actions/users.ts","types/index.ts","components/ModalLogin.tsx","components/ItemAdd.tsx","selectors.ts","components/ItemList.tsx","components/Home.tsx","App.tsx","reducers/users.ts","reducers/index.ts","index.tsx","config.ts"],"names":["Header","user","useSelector","state","users","dispatch","useDispatch","AppBar","position","Toolbar","Box","flexGrow","display","Grid","container","direction","alignItems","name","IconButton","color","onClick","localStorage","removeItem","type","React","memo","props","Dialog","open","aria-labelledby","aria-describedby","DialogContent","Container","component","maxWidth","mt","flexDirection","Avatar","Typography","variant","style","width","marginTop","onSubmit","event","preventDefault","login","currentTarget","value","password","checkAuth","TextField","margin","required","fullWidth","id","label","autoComplete","autoFocus","Button","titleItem","useState","newItemText","setNewItemText","inputEl","useRef","document","createElement","firebase","useFirebase","addItem","text","trim","newItem","completed","timestamp","Date","now","push","current","focus","justify","inputRef","onChange","target","aria-label","className","fontSize","sortItemsSelector","createSelector","ordered","items","sort","a","b","selectNumOfTodosWithIsDone","useMemo","key","remove","isLoaded","isEmpty","textAlign","List","map","item","labelId","ListItem","button","divider","ListItemIcon","Checkbox","inputProps","checked","update","updateItem","ListItemText","primary","ListItemSecondaryAction","forEach","TabPanel","children","index","other","role","hidden","py","setValue","useFirebaseConnect","path","Tabs","newValue","indicatorColor","textColor","Tab","onChangeIndex","authUser","find","passwordHash","verify","setItem","JSON","stringify","payload","putUser","App","initialState","rootReducer","combineReducers","action","firebaseReducer","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Storage","parse","store","createStore","composeWithDevTools","rrfProps","config","userProfile","useFirestoreForProfile","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.197b97b6.chunk.js","sourcesContent":["import React from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { RootReducerType } from '../reducers';\r\nimport { logoutUser } from '../actions/users';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nexport const Header: React.FC = () => {\r\n  const user = useSelector((state: RootReducerType) => state.users.user);\r\n\r\n  const dispatch = useDispatch();\r\n  const handleClick = () => {\r\n    localStorage.removeItem('user');\r\n    dispatch(logoutUser());\r\n  };\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <Box flexGrow={1} />\r\n        <Box display={'flex'}>\r\n          <Grid container direction=\"row\" alignItems=\"center\">\r\n            {user ? (\r\n              <>\r\n                <Box>Привет, {user.name}</Box>\r\n                <IconButton color=\"inherit\" onClick={handleClick}>\r\n                  <ExitToAppOutlinedIcon />\r\n                </IconButton>\r\n              </>\r\n            ) : (\r\n              <IconButton color=\"inherit\">\r\n                <AccountCircle />\r\n              </IconButton>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n","import {\r\n  PUT_USER,\r\n  LOGOUT_USER,\r\n  PutUserActionType,\r\n  LogoutUserActionType,\r\n  UserType\r\n} from '../types';\r\n\r\nexport const putUser = (user: UserType): PutUserActionType => {\r\n  return { type: PUT_USER, payload: user };\r\n};\r\n\r\nexport const logoutUser = (): LogoutUserActionType => {\r\n  return { type: LOGOUT_USER };\r\n};\r\n","export const PUT_USER = 'PUT_USER';\r\nexport const LOGOUT_USER = 'LOGOUT_USER';\r\n\r\nexport type UserAuthType = {\r\n  login: string;\r\n  password: string;\r\n};\r\n\r\nexport interface UserType extends UserAuthType {\r\n  name: string;\r\n}\r\n\r\nexport type UserFirebaseType = {\r\n  key: string;\r\n  value: UserAuthType;\r\n};\r\n\r\nexport type ItemType = {\r\n  completed: boolean;\r\n  text: string;\r\n  timestamp: number;\r\n};\r\n\r\nexport type ItemFirebaseType = {\r\n  key: string;\r\n  value: ItemType;\r\n};\r\n\r\nexport type InitialStateUsersType = {\r\n  user: UserType | null;\r\n};\r\n\r\nexport type PutUserActionType = {\r\n  type: typeof PUT_USER;\r\n  payload: UserType;\r\n};\r\n\r\nexport type LogoutUserActionType = {\r\n  type: typeof LOGOUT_USER;\r\n};\r\n\r\nexport type UserActionTypes = PutUserActionType | LogoutUserActionType;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport Container from '@material-ui/core/Container';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport { UserAuthType } from '../types';\r\n\r\ntype PropsType = {\r\n  checkAuth: ({ login, password }: UserAuthType) => void;\r\n};\r\n\r\nconst ModalLogin: React.FC<PropsType> = props => {\r\n  const handleClickAuth = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const login = event.currentTarget.login.value;\r\n    const password = event.currentTarget.password.value;\r\n    props.checkAuth({ login, password });\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={true}\r\n      aria-labelledby=\"scroll-dialog-title\"\r\n      aria-describedby=\"scroll-dialog-description\"\r\n    >\r\n      <DialogContent>\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n          <Box\r\n            mt={6}\r\n            display={'flex'}\r\n            flexDirection={'column'}\r\n            alignItems={'center'}\r\n          >\r\n            <Avatar>\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Авторизация\r\n            </Typography>\r\n            <form\r\n              style={{ width: '100%', marginTop: '8px' }}\r\n              onSubmit={handleClickAuth}\r\n            >\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"login\"\r\n                label=\"Login\"\r\n                name=\"login\"\r\n                autoComplete=\"login\"\r\n                autoFocus\r\n              />\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                style={{ margin: '24px 0 16px' }}\r\n              >\r\n                Войти\r\n              </Button>\r\n            </form>\r\n          </Box>\r\n        </Container>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default React.memo(ModalLogin);\r\n","import React, { useRef } from 'react';\r\nimport { useFirebase } from 'react-redux-firebase';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\r\n\r\ntype PropsType = {\r\n  titleItem: string;\r\n};\r\n\r\nconst ItemAdd: React.FC<PropsType> = ({ titleItem }) => {\r\n  const [newItemText, setNewItemText] = React.useState('');\r\n  const inputEl = useRef(document.createElement('input'));\r\n  const firebase = useFirebase();\r\n\r\n  const addItem = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    const text = newItemText.trim();\r\n    const newItem = {\r\n      text: text,\r\n      completed: false,\r\n      timestamp: Date.now()\r\n    };\r\n    if (text) {\r\n      firebase.push(titleItem, newItem);\r\n      setNewItemText('');\r\n      inputEl.current.focus();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={addItem}>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"center\"\r\n      >\r\n        <TextField\r\n          id=\"standard-basic\"\r\n          style={{ width: '70%' }}\r\n          value={newItemText}\r\n          inputRef={inputEl}\r\n          onChange={event => setNewItemText(event.target.value)}\r\n        />\r\n        <IconButton\r\n          aria-label=\"comments\"\r\n          onClick={addItem}\r\n          className=\"icon-button\"\r\n        >\r\n          <AddCircleOutline color=\"primary\" fontSize=\"large\" />\r\n        </IconButton>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={addItem}\r\n          color=\"primary\"\r\n          className=\"button\"\r\n        >\r\n          Добавить\r\n        </Button>\r\n      </Grid>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default React.memo(ItemAdd);\r\n","import { createSelector } from 'reselect';\r\nimport { RootReducerType } from './reducers';\r\nimport { ItemFirebaseType } from './types';\r\n\r\nexport const sortItemsSelector = () =>\r\n  createSelector(\r\n    (state: RootReducerType, titleItem: string) =>\r\n      state.firebase.ordered[titleItem],\r\n    (items: ItemFirebaseType[]) =>\r\n      items\r\n        ?.sort((a, b) => (a.value.timestamp > b.value.timestamp ? 1 : -1))\r\n        .sort((a, b) => (a.value.completed > b.value.completed ? 1 : -1))\r\n  );\r\n","import React, { useMemo } from 'react';\r\nimport { useFirebase, isLoaded, isEmpty } from 'react-redux-firebase';\r\nimport { useSelector } from 'react-redux';\r\nimport { ItemFirebaseType } from '../types';\r\nimport { RootReducerType } from '../reducers';\r\nimport { sortItemsSelector } from '../selectors';\r\nimport Button from '@material-ui/core/Button';\r\nimport Box from '@material-ui/core/Box';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\ntype PropsType = {\r\n  titleItem: string;\r\n};\r\n\r\nconst ItemList: React.FC<PropsType> = ({ titleItem }) => {\r\n  const selectNumOfTodosWithIsDone = useMemo(sortItemsSelector, []);\r\n  const items = useSelector((state: RootReducerType) =>\r\n    selectNumOfTodosWithIsDone(state, titleItem)\r\n  );\r\n\r\n  const firebase = useFirebase();\r\n\r\n  const updateItem = (item: ItemFirebaseType) => {\r\n    firebase.update(`${titleItem}/${item.key}`, {\r\n      completed: !item.value.completed\r\n    });\r\n  };\r\n\r\n  const removeItem = (key: string) => {\r\n    firebase.remove(`${titleItem}/${key}`);\r\n  };\r\n\r\n  const removeAllItem = () => {\r\n    items.forEach(item => removeItem(item.key));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isLoaded(items) ? (\r\n        !isEmpty(items) ? (\r\n          <List>\r\n            {items.map((item: ItemFirebaseType) => {\r\n              const labelId = `checkbox-list-label-${item.key}`;\r\n\r\n              return (\r\n                <ListItem key={item.key} button divider>\r\n                  <ListItemIcon>\r\n                    <Checkbox\r\n                      inputProps={{ 'aria-labelledby': labelId }}\r\n                      checked={item.value.completed}\r\n                      className={item.value.completed ? 'color-green' : ''}\r\n                      onChange={() => updateItem(item)}\r\n                    />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    id={labelId}\r\n                    className={item.value.completed ? 'line-through' : ''}\r\n                    primary={item.value.text}\r\n                  />\r\n                  <ListItemSecondaryAction>\r\n                    <IconButton\r\n                      aria-label=\"comments\"\r\n                      onClick={() => removeItem(item.key)}\r\n                    >\r\n                      <DeleteIcon style={{ color: 'red' }} />\r\n                    </IconButton>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              );\r\n            })}\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={removeAllItem}\r\n              color=\"primary\"\r\n              className=\"button-remove\"\r\n            >\r\n              Удалить все\r\n            </Button>\r\n          </List>\r\n        ) : (\r\n          <Box textAlign=\"center\" component=\"h3\">\r\n            Список пуст\r\n          </Box>\r\n        )\r\n      ) : (\r\n        <Box textAlign=\"center\" component=\"h3\">\r\n          Loading . . .\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(ItemList);\r\n","import React from 'react';\r\nimport { useFirebaseConnect } from 'react-redux-firebase';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport passwordHash from 'password-hash';\r\nimport { RootReducerType } from '../reducers';\r\nimport ModalLogin from './ModalLogin';\r\nimport ItemAdd from './ItemAdd';\r\nimport ItemList from './ItemList';\r\nimport { UserAuthType, UserFirebaseType } from '../types';\r\nimport { putUser } from '../actions/users';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  dir?: string;\r\n  index: any;\r\n  value: any;\r\n}\r\n\r\nconst TabPanel = (props: TabPanelProps) => {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`full-width-tabpanel-${index}`}\r\n      aria-labelledby={`full-width-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box py={3}>{children}</Box>}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nconst Home: React.FC = () => {\r\n  const [value, setValue] = React.useState(0);\r\n  const dispatch = useDispatch();\r\n\r\n  useFirebaseConnect([\r\n    { path: 'purchases' },\r\n    { path: 'others' },\r\n    { path: 'users' }\r\n  ]);\r\n\r\n  const users = useSelector(\r\n    (state: RootReducerType) => state.firebase.ordered.users\r\n  );\r\n\r\n  const user = useSelector((state: RootReducerType) => state.users.user);\r\n\r\n  const checkAuth = ({ login, password }: UserAuthType) => {\r\n    if (users) {\r\n      const authUser = users.find(\r\n        (user: UserFirebaseType) =>\r\n          user.value.login === login &&\r\n          passwordHash.verify(password, user.value.password)\r\n      );\r\n      if (authUser) {\r\n        localStorage.setItem('user', JSON.stringify(authUser.value));\r\n        dispatch(putUser(authUser.value));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const handleChangeIndex = (index: number) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <Container id=\"container\" maxWidth=\"sm\" className=\"my-4\">\r\n      {user ? (\r\n        <Box>\r\n          <AppBar position=\"static\" color=\"default\">\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              variant=\"fullWidth\"\r\n            >\r\n              <Tab label=\"Покупки\" />\r\n              <Tab label=\"Другое\" />\r\n            </Tabs>\r\n          </AppBar>\r\n          <SwipeableViews index={value} onChangeIndex={handleChangeIndex}>\r\n            <TabPanel value={value} index={0}>\r\n              <ItemAdd titleItem=\"purchases\" />\r\n              <ItemList titleItem=\"purchases\" />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <ItemAdd titleItem=\"others\" />\r\n              <ItemList titleItem=\"others\" />\r\n            </TabPanel>\r\n          </SwipeableViews>\r\n        </Box>\r\n      ) : (\r\n        <ModalLogin checkAuth={checkAuth} />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default React.memo(Home);\r\n","import React from 'react';\nimport { Header } from './components/Header';\nimport Home from './components/Home';\n\nexport const App: React.FC = () => {\n  return (\n    <>\n      <Header />\n      <Home />\n    </>\n  );\n};\n","import {\r\n  InitialStateUsersType,\r\n  PUT_USER,\r\n  LOGOUT_USER,\r\n  UserActionTypes\r\n} from '../types';\r\n\r\nconst initialState: InitialStateUsersType = {\r\n  user: null\r\n};\r\n\r\nexport function users(\r\n  state = initialState,\r\n  action: UserActionTypes\r\n): InitialStateUsersType {\r\n  switch (action.type) {\r\n    case PUT_USER:\r\n      return { ...state, user: action.payload };\r\n    case LOGOUT_USER:\r\n      return { ...state, user: null };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { users } from '../reducers/users';\r\nimport { InitialStateUsersType, UserType, ItemType } from '../types';\r\nimport { firebaseReducer, FirebaseReducer } from 'react-redux-firebase';\r\n\r\ntype ProfileType = {\r\n  isLoaded: boolean;\r\n  isEmpty: boolean;\r\n};\r\n\r\ntype DBSchema = {\r\n  users: UserType;\r\n  purchases: ItemType;\r\n  others: ItemType;\r\n  [name: string]: any;\r\n};\r\n\r\ntype RootState = {\r\n  users: InitialStateUsersType;\r\n  firebase: FirebaseReducer.Reducer<ProfileType, DBSchema>;\r\n};\r\n\r\nexport const rootReducer = combineReducers<RootState>({\r\n  users,\r\n  firebase: firebaseReducer\r\n});\r\n\r\nexport type RootReducerType = ReturnType<typeof rootReducer>;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ReactReduxFirebaseProvider } from 'react-redux-firebase';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { App } from './App';\nimport { rootReducer } from './reducers';\nimport { fbConfig } from './config';\nimport './index.css';\n\nconst rrfConfig = {\n  userProfile: 'users',\n  useFirestoreForProfile: true\n};\nfirebase.initializeApp(fbConfig);\nlet initialState = { users: { user: null } };\nif (typeof Storage !== 'undefined' && localStorage.user) {\n  let oldStateUser = JSON.parse(localStorage.user);\n  initialState = { users: { user: oldStateUser } };\n}\nconst store = createStore(rootReducer, initialState, composeWithDevTools());\nconst rrfProps = {\n  firebase,\n  config: rrfConfig,\n  dispatch: store.dispatch\n};\n\nReactDOM.render(\n  <Provider store={store}>\n    <ReactReduxFirebaseProvider {...rrfProps}>\n      <App />\n    </ReactReduxFirebaseProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n","export type FbConfigType = {\r\n  apiKey: string;\r\n  authDomain: string;\r\n  databaseURL: string;\r\n  projectId: string;\r\n  storageBucket: string;\r\n  messagingSenderId: string;\r\n  appId: string;\r\n  measurementId: string;\r\n};\r\n\r\nexport const fbConfig: FbConfigType = {\r\n  apiKey: 'AIzaSyAvYfkBEguJn7A9MHmwN5Q1E7X8Jce3E5o',\r\n  authDomain: 'todos-c16da.firebaseapp.com',\r\n  databaseURL: 'https://todos-c16da.firebaseio.com',\r\n  projectId: 'todos-c16da',\r\n  storageBucket: 'todos-c16da.appspot.com',\r\n  messagingSenderId: '753970111182',\r\n  appId: '1:753970111182:web:e49eac1bab66cc7ae1a69f',\r\n  measurementId: 'G-M35L5MWKTE'\r\n};\r\n"],"sourceRoot":""}